<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|0.8:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="卡方分析原理对于使用LSB隐写的图像，其图像统计特性必然会发生改变。设图像中灰度值为   j的像素数为hj，j属于灰度范围{0, 1, 2, …，255}。则LSB隐写比特后的像素灰度值改变规律为：2i-&gt;2i+1或2i+1-&gt;2i，而不可能出现2i-&gt;2i-1或2i-&gt;2i+2。例如：灰度值162&#x3D;10100010b，改变最低有效位的值，只可能变化到10100011b&#x3D;1">
<meta property="og:type" content="article">
<meta property="og:title" content="第十周学习">
<meta property="og:url" content="http://example.com/2021/05/03/%E3%80%90%E7%A0%94%E4%B8%80%E4%B8%8B%E3%80%91%E7%AC%AC%E5%8D%81%E5%91%A8%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Juaran&#39;s Blog">
<meta property="og:description" content="卡方分析原理对于使用LSB隐写的图像，其图像统计特性必然会发生改变。设图像中灰度值为   j的像素数为hj，j属于灰度范围{0, 1, 2, …，255}。则LSB隐写比特后的像素灰度值改变规律为：2i-&gt;2i+1或2i+1-&gt;2i，而不可能出现2i-&gt;2i-1或2i-&gt;2i+2。例如：灰度值162&#x3D;10100010b，改变最低有效位的值，只可能变化到10100011b&#x3D;1">
<meta property="og:locale">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210504102427318.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210505113059944.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507110219942.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507112255179.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507112803231.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210508095210947.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210508120334391.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509082708253.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509092103009.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509092211147.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507112803231.png">
<meta property="og:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509161239887.png">
<meta property="article:published_time" content="2021-05-02T16:00:00.000Z">
<meta property="article:modified_time" content="2021-10-19T09:46:27.741Z">
<meta property="article:author" content="Juaran">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210504102427318.png">

<link rel="canonical" href="http://example.com/2021/05/03/%E3%80%90%E7%A0%94%E4%B8%80%E4%B8%8B%E3%80%91%E7%AC%AC%E5%8D%81%E5%91%A8%E5%AD%A6%E4%B9%A0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>

  <title>第十周学习 | Juaran's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Juaran's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/03/%E3%80%90%E7%A0%94%E4%B8%80%E4%B8%8B%E3%80%91%E7%AC%AC%E5%8D%81%E5%91%A8%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Juaran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Juaran's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          第十周学习
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-05-03 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-03T00:00:00+08:00">2021-05-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-10-19 17:46:27" itemprop="dateModified" datetime="2021-10-19T17:46:27+08:00">2021-10-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A0%94%E4%B8%80%E4%B8%8B%E5%91%A8%E6%8A%A5/" itemprop="url" rel="index"><span itemprop="name">研一下周报</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="卡方分析"><a href="#卡方分析" class="headerlink" title="卡方分析"></a>卡方分析</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>对于使用LSB隐写的图像，其图像<strong>统计特性</strong>必然会发生改变。设图像中灰度值为   <code>j</code>的像素数为<code>hj</code>，<code>j</code>属于灰度范围{0, 1, 2, …，255}。则LSB隐写比特后的像素灰度值改变规律为：<code>2i-&gt;2i+1</code>或<code>2i+1-&gt;2i</code>，而不可能出现<code>2i-&gt;2i-1</code>或<code>2i-&gt;2i+2</code>。例如：灰度值162=10100010b，改变最低有效位的值，只可能变化到10100011b=163。因此，统计像素数对<code>h2i</code>与<code>h2i+1</code>，<code>i</code>属于范围{0, 1, …, 127}，由于嵌入比特流为随机0或1，得到二者的统计结果将会<strong>趋近</strong>，而未嵌入比特流的统计结果无此趋势。</p>
<span id="more"></span>

<h3 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h3><ol>
<li>绘制原图的灰度直方图</li>
<li>绘制随机嵌入0、1比特流的隐密图的灰度直方图</li>
<li>对比分析统计结果</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 原图</span></span><br><span class="line">cover = Image.<span class="built_in">open</span>(<span class="string">&#x27;lena512.bmp&#x27;</span>)</span><br><span class="line">cover_pixel_counts = cover.histogram()       <span class="comment"># 统计不同灰度级数量</span></span><br><span class="line"><span class="comment"># 隐写图</span></span><br><span class="line">stego = Image.<span class="built_in">open</span>(<span class="string">&#x27;stego.bmp&#x27;</span>)</span><br><span class="line">stego_pixel_counts = stego.histogram()       <span class="comment"># 统计不同灰度级数量</span></span><br><span class="line"> </span><br><span class="line">pixel = np.linspace(<span class="number">90</span>, <span class="number">109</span>, <span class="number">10</span>)    <span class="comment"># 获取范围94-103的10个灰度级</span></span><br><span class="line">plt.bar(pixel, cover_pixel_counts[<span class="number">94</span>: <span class="number">104</span>])     <span class="comment"># 原图统计</span></span><br><span class="line">plt.bar(pixel+<span class="number">0.8</span>, stego_pixel_counts[<span class="number">94</span>: <span class="number">104</span>])     <span class="comment"># 隐密图统计</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210504102427318.png"></p>
<p>以上统计结果，蓝色柱状图为原图统计结果，橘色柱状图为隐密图统计结果。由于灰度级过多，挑选90-109的20个灰度值展示。两两对比<code>2i</code>和<code>2i+1</code>的灰度数量，可以发现原图的统计量差总是大于隐密图的统计量，特别是在灰度级98、99时，原图相差一大截，隐写后则几乎持平。因此，由统计结果中灰度数量变化较为平缓的特点可以怀疑使用了LSB隐写。</p>
<p>由以上实验，虽然隐写改变了<code>h2i</code>和<code>h2i+1</code>的值，但<code>h2i+h2i+1</code>始终保持不变，当嵌入量足够多时，嵌入比特非0即1（服从0-1离散均匀分布），得到<code>h2i</code>和<code>h2i+1</code>的概率各为50%。综上，隐密图片灰度值对<code>(h2i, h2i+1)</code>满足以上分布性质，而原图不具备，根据卡方检验方法，<code>h2i</code>的期望值为<code>h2i*=(h2i+h2i+1)/2</code>，有以下卡方检验：<br>$$<br>\chi^2 = \sum_{i=0}^{k=127} \frac {[h_{2i} - h_{2i}^*]^2} {h_{2i}^*}<br>$$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h = stego_pixel_counts</span><br><span class="line"><span class="built_in">sum</span>([(h[<span class="number">2</span>*i] - <span class="built_in">sum</span>(h[<span class="number">2</span>*i:<span class="number">2</span>*i+<span class="number">2</span>])/<span class="number">2</span>)**<span class="number">2</span> / (<span class="built_in">sum</span>(h[<span class="number">2</span>*i:<span class="number">2</span>*i+<span class="number">2</span>])/<span class="number">2</span>+<span class="number">0.000001</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">127</span>)])</span><br></pre></td></tr></table></figure>

<blockquote>
<p>隐密图卡方检验值：50.46143061544536</p>
<p>原图卡方检验值：220.25579551083484</p>
</blockquote>
<table>
<thead>
<tr>
<th>P</th>
<th>0.995</th>
<th>0.975</th>
<th>0.2</th>
<th>0.1</th>
<th>0.05</th>
<th>0.025</th>
<th>0.02</th>
<th>0.01</th>
</tr>
</thead>
<tbody><tr>
<td>128</td>
<td>90.543</td>
<td>98.576</td>
<td>141.235</td>
<td>148.885</td>
<td>155.405</td>
<td>161.209</td>
<td>162.963</td>
<td>168.133</td>
</tr>
</tbody></table>
<p>查自由度为128的卡方分布表，隐写图的检验值为50，小于90时对应的99.5%的置信度，概率几乎为1；而原图的检验值220，超出168时对应的1%的置信度，概率几乎为0。因此，卡方检验可以用于区分LSB隐写的图像。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>针对LSB嵌入算法嵌入比特位随机分布的特点，卡方检验可以轻易识别出这种分布规律，原图则在最低位与高位值存在内容相关性，不服从分布特性。也正因此，这种检验方法在嵌入率高时越有效，低隐写率呈现的是隐写部分服从该分布而未隐写部分无相关性，对于伪随机嵌入同理。</p>
<p><strong>参考</strong>：<a target="_blank" rel="noopener" href="https://www.renrendoc.com/paper/110622186.html">https://www.renrendoc.com/paper/110622186.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/301957087">https://www.zhihu.com/question/301957087</a></p>
<p><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/3613dca3b8f67c1cfbd6b841.html">https://wenku.baidu.com/view/3613dca3b8f67c1cfbd6b841.html</a></p>
<p>对LSB隐写攻击的其他手段参考：<a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/7809ab0957270722192e453610661ed9ad51557b.html">基于LSB的隐写与隐写分析</a></p>
<h2 id="LSB-Matching"><a href="#LSB-Matching" class="headerlink" title="LSB Matching"></a>LSB Matching</h2><p>在之前的Simple <strong>LSB Substitution</strong>中，LSB嵌入的比特随机且嵌入信息与原图无关，每个选择的像素最低有效位被隐藏消息的一位替换，偶数像素值不变或+1，奇数像素值不变或-1，这样使得<code>2i</code>与<code>2i+1</code>的像素值对数量呈现趋近趋势，使用统计方法可以可靠检测出这种特性。</p>
<p><strong>LSB Matching</strong>是LSB的改进算法，也被称为<code>±1嵌入</code>，在必须更改该位时（隐藏消息位与LSB不同）将像素值随机加1或减1，这样既保留了LSB替换的特性，又保证在统计角度难以检测，不会出现具有相关性的像素对。理论分析和实践表明，尽管只做了简单的随机嵌入，这种嵌入方法比替换方法的隐写分析更为困难，目前（2010年以前）对于LSB替换的攻击方法效果都不是很好。</p>
<p>[1] J. Mielikainen, “LSB matching revisited,” in <em>IEEE Signal Processing Letters</em>, vol. 13, no. 5, pp. 285-287, May 2006, doi: 10.1109/LSP.2006.870357.（原文在IEEE要钱看不到）</p>
<p>[2] <a target="_blank" rel="noopener" href="https://scialert.net/fulltext/?doi=itj.2010.1725.1738#ref">Jiaohua Qin, Xuyu Xiang and Meng Xian Wang, 2010. A Review on Detection of LSB Matching Steganography. <em>Information Technology Journal, 9: 1725-1738.</em></a> （找了篇详细的综述文章）</p>
<p>[3] <a target="_blank" rel="noopener" href="https://blog.csdn.net/u012939857/article/details/68940859">https://blog.csdn.net/u012939857/article/details/68940859</a></p>
<p><img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210505113059944.png" alt="image-20210505113059944"></p>
<p><strong>代码实现</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">LSB_matching</span>(<span class="params">cover_img</span>):</span></span><br><span class="line">    im = Image.<span class="built_in">open</span>(cover_img)</span><br><span class="line">    stego_im = np.ones((im.height, im.width))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(im.height):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(im.width):</span><br><span class="line">            <span class="comment"># 随机嵌入-1, 0, 1, 模拟LSM匹配算法 正负1嵌入 和 保持不变 的情形</span></span><br><span class="line">            stego_im[i][j] = im.getpixel((j,i)) + random.randint(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    stego = Image.fromarray(stego_im).convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">    stego.save(<span class="string">&#x27;stego.bmp&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">LSB_matching(<span class="string">&#x27;lena512.bmp&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>对LSB匹配的隐写分析方法经历了以下几个阶段：</p>
<ol>
<li>Harmsen 和 Pearlman (2003)提出了一种使用直方图特征函数分析(HCF)的检测方法</li>
<li>Ker (2005a)扩展了 Harmsen 方法，提出了两种新的方法: (1)用下采样图像标定质量输出中心(COM) ，(2)用邻接直方图代替通常的直方图</li>
<li>Fridrich 等人(2005)提出了一种最大似然估计器，用于估计非自适应 ± k 嵌入图像中嵌入变化的次数</li>
<li>(2008)提取为小波域中的噪声残差矩和灰度直方图(进一步称为ALE检测器)中局部极值放大的统计量的特征。</li>
<li>小波绝对力矩(WAM)阶梯分析仪</li>
<li>（2010）差分像素邻接矩阵（SPAM）模型</li>
</ol>
<h2 id="通用隐写分析"><a href="#通用隐写分析" class="headerlink" title="通用隐写分析"></a>通用隐写分析</h2><p>一般专用隐写分析技术对特定的隐藏方法具有较高的准确性, 但对其他方法无效；相反, 通用隐写分析技术可以同时检测许多隐藏方法, 甚至包括未知的新方法。在深度学习之前，传统的通用隐写分析都是从图像的统计特征入手，构建特征提取模型。随着隐写算法的改进，从LSB替换到LSM匹配，再到<strong>自适应隐写方法</strong>的出现，隐写前后图像的统计特性基本保持一致，隐写分析难度也越来越大。</p>
<p>根据不同的特征提取方式，通用隐写分析可分为基于图像质量标准的隐写分析特征、基于统计矩的隐写分析特征、基于相邻像素相关性的隐写分析特征。其中，差分像素邻接矩阵（SPAM）法是性能最好的通用隐写检测方法。</p>
<p>[1] 张军,熊枫,张丹.图像隐写分析技术综述[J].计算机工程,2013,39(04):165-168+172.</p>
<p>[2] 彭伟,胡宁,胡璟璟.图像隐写分析算法研究概述[J].计算机科学,2020,47(S1):325-331.</p>
<p><strong>自适应隐写</strong>发展：</p>
<p>根据构造的嵌入失真函数计算载体图像中元素发生更改所引起的失真，利用隐写编码控制秘密信息的嵌入位置，在最小化图像总体嵌入失真的同时保证秘密信息的准确提取。</p>
<ul>
<li><p>EA(Edge Adaptive) 边缘自适应</p>
</li>
<li><p>HUGO(Highly Undetectable steGO)是第一个基于“嵌入失真函数+STCs编码”的自适应隐写算法，应用于BOSS（Break our Steganographic System）隐写分析竞赛。–&gt; 设计目的是对抗SPAM二阶特征的分析</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/345915051">空域自适应隐写算法HUGO—-原理，代码及解析</a></li>
</ul>
</li>
<li><p>空域自适应隐写</p>
<ul>
<li>WOW（Wavelet Obtained Weights）</li>
<li>S-UNIWARD（Spatial UNIversal WAvelet Relative Distortion）</li>
<li>HILL（HIgh-pass, Low-pass, and Low-pass）</li>
</ul>
</li>
<li><p>JPEG域自适应隐写（变换域）</p>
<ul>
<li>YASS</li>
<li>UED（Uniform Embedding Distortion）<ul>
<li>SC-UED（Single Coefficient UED）</li>
<li>JC-UED（Joint Coefficients UED）</li>
</ul>
</li>
<li>J-UNIWARD（JPEG UNIversal WAvelet Relative Distortion）</li>
</ul>
</li>
</ul>
<h2 id="SPAM"><a href="#SPAM" class="headerlink" title="SPAM"></a>SPAM</h2><p>[1] <a target="_blank" rel="noopener" href="https://hal.archives-ouvertes.fr/hal-00541410/document">PEVNÝ T, BAS P, FRIDRICH J. Steganalysis by subtractive pixel adjacency matrix[J]. IEEE Transactions on Information Forensics &amp; Security, 2010, 5(2):215-224.</a></p>
<p>[2] 杨雪,杨榆,雷敏.基于SPAM和特征优化的通用隐写分析算法改进[J].成都信息工程大学学报,2016,31(01):65-69.</p>
<h3 id="特征提取"><a href="#特征提取" class="headerlink" title="特征提取"></a>特征提取</h3><p>首先，计算<code>m x n</code>图像每一像素与八个领域的像素差值，得到八个像素差分矩阵D（difference array D）。以水平方向为例，其他方向同理：<br>$$<br>D_{i,j}^{\to} = I_{i,j} - I_{i,j+1}<br>$$<br>以上计算从左到右的像素差值时，<em>i</em> <em>∈ {<em>1</em>,…,m</em><em>}**, j</em> <em>∈ {<em>1</em>,…,n</em> <em>−</em> 1}. 其他方向计算时需要注意边界。其他7个方向的差分矩阵分别记为<code>D←i,j</code>,<code>D↓i,j</code>,<code>D↑i,j</code>,<code>D↘i,j</code>,<code>D↖i,j</code>,<code>D↙i,j</code>,<code>D↗i,j</code>。</p>
<p>其次，用一阶马尔可夫过程（Markov process）对差分阵列D进行建模。马尔科夫模型的状态空间为像素差值Xn={-510, …, -255, …, -4, -3, -2, -1, 0, 1, 2, 3, 4, …, 255, …, 510}，从像素差值<code>u</code>转移到像素差值<code>v</code>的过程为一阶马尔科夫链，则状态转移概率矩阵大小为<code>（2x510+1）^2</code>。定义水平从左到右的差值转移概率矩阵<code>M→u,v</code>为：<br>$$<br>M^→_{u,v} = Pr(D^→_{i,j+1} = u \ | \ D^→_{i,j} = v)<br>$$<br>即：在当前像素位置像素差值<code>Di,j=u</code>，转移到下一像素位置的像素差值<code>Di,j+1=v</code>的转移概率是条件概率<code>Pr(u|v)=Pr(u,v) / Pr(v)</code>。使用阈值<code>T</code>限制<code>u, v ∈ &#123;−T,...,T&#125;</code>，从而状态转移矩阵大小为<code>(2T +1)^2</code>，去除了差值过大的转移概率计算。</p>
<p>使用二阶马尔科夫过程对差分矩阵D进行建模，进一步得到像素差值二次转移的概率矩阵。定义为：<br>$$<br>M^→<br>_{u,v,w} = P r(D^→<br>_{i,j+2} = u \ | \ D^→<br>_{i,j+1} = v, \ D^→<br>_{i,j} = w)<br>$$<br>即差值从<code>w</code>转移到<code>v</code>再转移到<code>u</code>的概率。使用阈值<code>T</code>限制<code>u, v, w ∈ &#123;−T,...,T&#125;</code>，矩阵大小为<code>(2T +1)^3</code>。</p>
<p>最后，为了降低特征维数，作者做了一个合理的假设，即自然图像中的统计量在镜像和翻转方面是对称的，因此，分别平均水平矩阵和垂直矩阵，然后平均对角矩阵，以形成最终的SPAM特征集<code>F1st</code>，<code>F2nd</code>，定义如下：<br>$$<br>F_{1,…,k} = \frac1{4} \ [M^→ + M^← + M^↓ + M^↑] , \<br>F_{k+1,…,2k} = \frac1{4} \ [M^↘+ M^↖ + M^↙ + M^↗]<br>$$<br>对于一阶SPAM特征，一共有<code>2k=2(2T+1)^2 </code>个特征，前k个特征对应水平和垂直四个方向的转移概率矩阵（大小为<code>(2T+1)x(2T+1)</code>）均值转为一维向量，后k个特征对应主对角线和副对角线四个方向的转移概率矩阵均值转为一维向量。对应的，特征<code>F1</code>为差值<code>-T</code>转移到<code>-T</code>的概率均值，特征<code>F2</code>为差值<code>-T</code>转移到<code>-(T+1)</code>的概率均值，依次类推，特征<code>Fk</code>为差值<code>T</code>转移到<code>T</code>的概率均值。</p>
<p>在论文中，为了降低维数，一阶特征取T=4、8，得到162个、578个特征；二阶特征取T=3，得到686个特征。模型复杂度取决于马尔科夫过程阶数和差值范围T。以上特征提取过程如下图所示：</p>
<p><img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507110219942.png" alt="image-20210507110219942"></p>
<p>作者在末尾解释这个过程：</p>
<blockquote>
<p>差分数组的计算可以解释为使用核[−1,1]的高通滤波，这实际上是最简单的边缘检测器。滤波抑制图像内容并暴露半移噪声，从而导致更高的信噪比SNR。这个主意借鉴了WAM计算小波域噪声残余矩。</p>
</blockquote>
<h3 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h3><p>首先，下载论文中的SPAM特征提取代码(<a target="_blank" rel="noopener" href="http://dde.binghamton.edu/download/spam/)%EF%BC%8C%E5%9C%A8Windows%E4%B8%8B%E9%80%9A%E8%BF%87Visual">http://dde.binghamton.edu/download/spam/)，在Windows下通过Visual</a> Studio打开项目，编译相关静态和动态链接库（费了我不少劲），Debug得到SPAM.exe。对测试图片输出一阶SPAM特征<code>a.txt</code>，然后使用LSB matching算法隐写该图片，对隐写图输出一阶SPAM特征<code>b.txt</code>。</p>
<blockquote>
<p>$ SPAM.exe –singleFile 1.png -T1 4 –oFile1st a.txt<br>processing 1.png</p>
<p>$ SPAM.exe –singleFile stego.png -T1 4 –oFile1st b.txt<br>processing stego.png</p>
</blockquote>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507112255179.png" alt="image-20210507112255179" style="zoom: 50%;" />

<p>得到了两组差值阈值为4、共162维的一阶像素差值概率转移矩阵SPAM特征，可视化这些特征，对比隐写前后SPAM特征变化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">x = np.linspace(<span class="number">1</span>, <span class="number">162</span>, <span class="number">162</span>)</span><br><span class="line">y1 = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="built_in">float</span>(x), <span class="built_in">list</span>(<span class="string">&#x27;a.txt&#x27;</span>)))    <span class="comment"># 提取a.txt数值列表</span></span><br><span class="line">y2 = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="built_in">float</span>(x), <span class="built_in">list</span>(<span class="string">&#x27;b.txt&#x27;</span>)))    <span class="comment"># 提取b.txt数值列表</span></span><br><span class="line">plt.plot(x, y1)</span><br><span class="line">plt.plot(x, y2)</span><br><span class="line">plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507112803231.png" alt="image-20210507112803231" style="zoom:80%;" />

<p>图中蓝色曲线代表原图的一阶SPAM特征，橘色曲线代表LSB匹配算法隐写图的一阶SPAM特征。原图左侧峰值对应特征为差值<code>0-&gt;0</code>在水平、垂直方向的状态转移概率均值，右侧峰值对应差值<code>0-&gt;0</code>在对角线方向的状态转移概率均值；由随机加减一嵌入后的隐写图像的SPAM特征表现出了不一样的特征，左侧峰值分别对应<code>-1-&gt;1</code>、<code>0-&gt;0</code>、<code>1-&gt;-1</code>，右侧同理。</p>
<p>对此隐写前后特征的变化解释为：有更多的原本应为<code>-1-&gt;-1</code>和<code>-1-&gt;0</code>的转移概率在隐写之后受到抑制，从而<code>-1-&gt;1</code>的转移概率增加；有更多的原本应为<code>0-&gt;-1</code>和<code>0-&gt;1</code>的转移概率在隐写之后受到抑制，从而<code>0-&gt;0</code>的转移概率增加；有更多的原本应为<code>1-&gt;-2</code>和<code>1-&gt;0</code>的转移概率在隐写之后受到抑制，从而<code>1-&gt;-1</code>的转移概率增加。</p>
<p>另外，原图的特征也很明显，上半部分是天空，像素值基本都是255，下半部分是山地，像素值低。因此差值大多数会聚集在-1，0，1周围，这也符合上图的统计规律。</p>
<p>不同隐写率下提取特征对比：隐写率越低，SPAM特征越接近原图。</p>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210508095210947.png" alt="image-20210508095210947" style="zoom: 80%;" />

<p><strong>HUGO</strong>自适应隐写下的一阶SPAM特征：0.5bpp，已经看不出来差异了。</p>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210508120334391.png" alt="image-20210508120334391" style="zoom: 67%;" />

<h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>SPAM特征提取像素差值在有限范围[-T, T]内，目的是为了降低马尔科夫状态转移矩阵大小从而降低特征维数，以便于后续分类（论文使用SVM分类器）。由此带来的缺陷是，对于差值较大、不在T范围内的像素不会被提取为SPAM特征，后续隐写算法HUGO等正是基于二阶SAPM特征的这个特点，将信息位隐藏在图像边缘、轮廓地带，从而不被检测。</p>
<p>有以下想法：</p>
<ul>
<li>对取得的一阶、二阶SPAM特征，使用神经网络分类训练</li>
<li>不进行降维，保留图像的所有像素差值转移概率，但差值范围由原来的[-510, 510]取绝对值为[0, 255]，得到256x256大小的概率转移矩阵。由对称性，取<code>F=1/8(M_各方向)</code>，不转换维度。使用CNN等神经网络对特征矩阵进行分类任务训练，或许可以得到更好的效果！</li>
</ul>
<h2 id="SPAM-CNN"><a href="#SPAM-CNN" class="headerlink" title="SPAM+CNN"></a>SPAM+CNN</h2><h3 id="LSBmatching"><a href="#LSBmatching" class="headerlink" title="LSBmatching"></a>LSBmatching</h3><p><strong>网络模型</strong>：输入为一组（cover，stego）的一阶SPAM特征，大小为2x162，使用9个2x2卷积核和三个全连接层组成简单模型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">self.net = nn.Sequential(</span><br><span class="line">            <span class="comment"># input size: [batch, channel, 2, 162]</span></span><br><span class="line">            nn.Conv2d(in_channels=<span class="number">1</span>, out_channels=<span class="number">9</span>, kernel_size=<span class="number">2</span>, padding=<span class="number">0</span>),</span><br><span class="line">            nn.ReLU(),      <span class="comment"># [1, 9, 1, 161]</span></span><br><span class="line">            nn.Flatten(),   <span class="comment"># [1, 1449]</span></span><br><span class="line">            nn.Linear(<span class="number">1449</span>, <span class="number">100</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">100</span>, <span class="number">10</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<p><strong>第一次实验</strong>：LSBmatching，隐写率1.0bpp</p>
<p>8000训练集+2000测试集，99.9%准确率。训练时间：20s（SVM需要17h）。</p>
<blockquote>
<p>(venv) $ python3 spam_net.py<br>Epoch 1 50 / 10000 Loss 0.6870915293693542<br>Epoch 2 50 / 10000 Loss 0.5190097689628601<br>Epoch 3 50 / 10000 Loss 0.11720794439315796<br>Epoch 4 50 / 10000 Loss 0.0542331263422966<br>Epoch 5 50 / 10000 Loss 0.017127415165305138<br>Epoch 6 50 / 10000 Loss 0.027075674384832382<br>Epoch 7 50 / 10000 Loss 0.02605585567653179<br>Epoch 8 50 / 10000 Loss 0.011004366911947727<br>Epoch 9 50 / 10000 Loss 0.01031360775232315<br>Epoch 10 50 / 10000 Loss 0.04042639583349228<br>Model saved.<br>Validate accuracy:0.999</p>
</blockquote>
<p><strong>第二次实验</strong>：LSBmatching，隐写率0.5bpp</p>
<p>使用已训练的隐写率1.0bpp的模型，1000测试集，97.8%准确率。</p>
<blockquote>
<p>Validate accuracy:0.978</p>
</blockquote>
<p><strong>第三次实验</strong>：LSBmatching，隐写率0.25bpp</p>
<p>使用已训练的隐写率1.0bpp的模型，500测试集，94.4%准确率。</p>
<blockquote>
<p>Validate accuracy:0.944</p>
</blockquote>
<p><strong>第四次实验</strong>：HUGO，隐写率0.5</p>
<p>使用已训练的LSB-matching隐写率1.0bpp的模型，1000测试集，71.5%准确率。</p>
<blockquote>
<p>Validate accuracy:0.715</p>
</blockquote>
<h3 id="HUGO"><a href="#HUGO" class="headerlink" title="HUGO"></a>HUGO</h3><p>HUGO自适应隐写前后的一阶SPAM特征几乎无差别，因此未经训练得到70%的准确率已经不错了。后续对HUGO隐写的特征向量进行训练，再做测试。向学姐要来10000张BOW2数据集原图和不同程度HUGO隐写率的隐写图。</p>
<h4 id="实验-1"><a href="#实验-1" class="headerlink" title="实验"></a>实验</h4><p>采用同样方法得到一阶SPAM特征，差值范围[-4, 4]。训练HUGO隐写图像bpp=0.5情况下的特征分类模型，训练模型和实验数据如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">self.net = nn.Sequential(</span><br><span class="line">            nn.Conv2d(in_channels=<span class="number">1</span>, out_channels=<span class="number">49</span>, kernel_size=<span class="number">2</span>, padding=<span class="number">0</span>),</span><br><span class="line">            nn.ReLU(),      <span class="comment"># [1, 9, 2, 686]</span></span><br><span class="line">            nn.Flatten(),   <span class="comment"># [1, 49*685]</span></span><br><span class="line">            nn.Linear(<span class="number">49</span>*<span class="number">685</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, <span class="number">100</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">100</span>, <span class="number">10</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<ul>
<li>隐写率0.5bpp所得模型对自身训练集验证结果：</li>
</ul>
<blockquote>
<p>10轮：Validate accuracy:0.8936<br>30轮：Validate accuracy:0.9696<br>40轮：Validate accuracy:0.9782<br>70轮：Validate accuracy:0.9984<br>100轮：Validate accuracy:1.0</p>
</blockquote>
<p>使用100轮得到的模型验证结果高达100%，显然存在过拟合问题。</p>
<ul>
<li>使用以上模型检测不同隐写率的HUGO图像（相同载体图不同隐写率）：</li>
</ul>
<blockquote>
<p>0.4bpp：Validate accuracy:0.9649<br>0.3bpp：Validate accuracy:0.9204<br>0.2bpp：Validate accuracy:0.8566</p>
</blockquote>
<ul>
<li>验证集，载体图与隐写图均与训练集不同，2000张，0.5/0.4/0.3/0.2bpp验证结果：</li>
</ul>
<blockquote>
<p>05bpp：Validate accuracy:0.835<br>04bpp：Validate accuracy:0.7945<br>0.3bpp：Validate accuracy:0.7375<br>0.2bpp：Validate accuracy:0.6615</p>
</blockquote>
<ul>
<li>在原有模型训练0.2bpp隐写数据得到微调模型，但测试结果比上面仅增加1%准确率。</li>
</ul>
<p>以上实验结果表明，测试集所得模型可以适用于该测试集所用载体图隐写的不同HUGO隐写率图像，但对验证集上与之不同载体图的数据预测效果较低，究其原因是网络模型过于简单，过拟合严重，模型泛化能力差，对未知数据的识别能力差。</p>
<p>再究其原因，低隐写率图像的二阶SPAM特征与原图几乎一致，SPAM特征本质是像素差值矩阵，而像素差值的马尔科夫转移概率矩阵范围仅在[-3, 3]内，又HUGO这类自适应隐写算法本身就是为了克服二阶SPAM特征而生，这使得隐写像素在图像边缘、纹理、边界地带，从而像素差值远远超过[-3, 3]的范围，就是说能够提取到的特征已经微乎其微了。</p>
<p>为了克服这个问题，扩大SPAM特征矩阵大小，将矩阵差值T设大些再进行试验。</p>
<p><strong>修改网络模型</strong>，通道数改为2，即将原来的一维向量(cover, stego)堆叠成二维，原本的一维特征也化为二维，即二维的转移概率矩阵；使用的数据集为一阶SPAM特征，差值范围T=8，训练使用10000张原图+0.5bpp隐写图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">self.net = nn.Sequential(</span><br><span class="line">            <span class="comment"># input size: [batch, 2, 2, -1]</span></span><br><span class="line">            nn.Conv2d(in_channels=<span class="number">2</span>, out_channels=<span class="number">17</span>, kernel_size=<span class="number">2</span>, padding=<span class="number">0</span>),</span><br><span class="line">            nn.ReLU(),      <span class="comment"># [1, 9, 1, 161]</span></span><br><span class="line">            nn.Flatten(),   <span class="comment"># [1, 1449]</span></span><br><span class="line">            nn.Linear(<span class="number">17</span> * (<span class="number">17</span> * <span class="number">17</span> - <span class="number">1</span>), <span class="number">1024</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            <span class="comment"># nn.Dropout(0.5),</span></span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, <span class="number">100</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">100</span>, <span class="number">10</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<p>经100轮训练，对2000张验证集数据进行验证，0.5bpp的隐写数据准确率由之前实验的83.5%提高到88.5%，0.4bpp提升了6%，0.3bpp提升了7%，0.2bpp提升了8%：</p>
<blockquote>
<p>0.5bpp：Validate accuracy:0.8855<br>0.4bpp：Validate accuracy:0.858<br>0.3bpp：Validate accuracy:0.8085<br>0.2bpp：Validate accuracy:0.735</p>
</blockquote>
<p>再使用0.5bpp所得模型微调0.3bpp数据集，所得模型再次进行验证，略微提升了1-3%。</p>
<p>接下来的实验准备直接训练0.2bpp的数据集，</p>
<hr>
<h4 id="扩大阈值"><a href="#扩大阈值" class="headerlink" title="扩大阈值"></a>扩大阈值</h4><p>再回到问题的根本，二阶SPAM特征在HUGO等自适应隐写情况下已经提取不到明显的噪声特征，如果把阈值扩大到128，对比差值为[-128, 128]范围0.2bpp下的SPAM特征：</p>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509082708253.png" alt="image-20210509082708253" style="zoom: 80%;" />

<p>如图所示，得到的转移概率矩阵展开共有132098维，这也可以解释为何传SVM分类器等无法取得更好的隐写分析率。缩小范围，直接截取矩阵的257x64部分，共16448个特征，并加入0.5bpp作对比：</p>
<table>
<tr>
<td>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509092103009.png" alt="image-20210509083914405" style="zoom: 80%;" />
</td>
<td>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509092211147.png" alt="image-20210509084008890" style="zoom: 80%;" />
</td>
</td>
</table>

<p>此时，特征对比以及很明显，如果继续降低维度，能更清晰的看到特征差异，但如果维度过低，所得特征具有局限性，不能作为其他图片的提取特征。</p>
<p><strong>经过合理性考量，将一阶SPAM差值阈值T设为T=64，得到（2T+1）^2约为2^9，仅取矩阵上四分位部分，即大小129x32约4096个特征向量。</strong></p>
<p>使用批处理执行命令：</p>
<blockquote>
<p>SPAM.exe –singleFile 图片路径 -T1 64 –oFile1st 图片名.txt</p>
</blockquote>
<p>不幸的是，<strong>在训练时一直未能收敛</strong>。原因可能是<strong>特征之间关联性不强</strong>，表现在统计图中是有很多尖锐的点，导致难以区分特征差异。以下是之前能达到收敛的特征和当前提取特征对比：</p>
<table><td>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210507112803231.png" alt="image-20210507112803231" style="zoom:75%;" />
</td><td>
<img src="https://gitee.com/juaran/typora-image/raw/master/typora/image-20210509161239887.png" alt="image-20210509161239887" style="zoom:100%;" />
</td></table>

<p>得到的结论是，虽然能够提取自适应隐写图像的高维特征，但这些特征杂乱无序，难以训练。</p>
<p>（未完待续……）</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/27/%E3%80%90%E7%A0%94%E4%B8%80%E4%B8%8B%E3%80%91%E7%AC%AC%E4%B9%9D%E5%91%A8%E5%AD%A6%E4%B9%A0/" rel="prev" title="第九周学习">
      <i class="fa fa-chevron-left"></i> 第九周学习
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/05/13/%E3%80%90%E7%A0%94%E4%B8%80%E4%B8%8B%E3%80%91%E7%AC%AC%E5%8D%81%E4%B8%80%E5%91%A8%E5%AD%A6%E4%B9%A0/" rel="next" title="第十一周学习">
      第十一周学习 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%A1%E6%96%B9%E5%88%86%E6%9E%90"><span class="nav-number">1.</span> <span class="nav-text">卡方分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">1.1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C"><span class="nav-number">1.2.</span> <span class="nav-text">实验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.3.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LSB-Matching"><span class="nav-number">2.</span> <span class="nav-text">LSB Matching</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E9%9A%90%E5%86%99%E5%88%86%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">通用隐写分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPAM"><span class="nav-number">4.</span> <span class="nav-text">SPAM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96"><span class="nav-number">4.1.</span> <span class="nav-text">特征提取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B"><span class="nav-number">4.2.</span> <span class="nav-text">实验过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%9D%E8%80%83"><span class="nav-number">4.3.</span> <span class="nav-text">思考</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPAM-CNN"><span class="nav-number">5.</span> <span class="nav-text">SPAM+CNN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LSBmatching"><span class="nav-number">5.1.</span> <span class="nav-text">LSBmatching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HUGO"><span class="nav-number">5.2.</span> <span class="nav-text">HUGO</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C-1"><span class="nav-number">5.2.1.</span> <span class="nav-text">实验</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A9%E5%A4%A7%E9%98%88%E5%80%BC"><span class="nav-number">5.2.2.</span> <span class="nav-text">扩大阈值</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Juaran</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">48</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Juaran</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
